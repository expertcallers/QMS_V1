{% extends 'base.html' %}
{% block main %}
{% load static %}

<div class="container-lg">
    <div class="row">
        <div class="col-md-6">
            <div class="row">
                <div class="summary col-md-5">
                    <h6>Overall Team Score</h6>
                    <h3>{{process_avg}}%</h3>
                </div>
                <div class="summary col-md-5">
                    <h6>Total Audits</h6>
                    <h3>{{total_audit_count}}</h3>
                </div>
                <div class="summary col-md-5">
                    <h6>Total Errors</h6>
                     <h3>{{total_errors}}</h3>
                </div>
                <div class="summary col-md-5">
                    <h6>Total missed Fatal Parameters</h6>
                    <h3>{{total_fatal}}</h3>
                </div>
            </div>

        </div>
        <div class="col-md-6" style="padding: 40px">
            <table class="table table-hover" style="background: #944000a1;color: black;">
                <tr>
                    <th></th>
                    <th>Audits</th>
                    <th>Score</th>
                </tr>
                {% for w in week_wise_avg %}
                <tr>
                    <th>{{w.week}}</th>
                    <td>{{w.dcount}}</td>
                    <td>{{w.davg|floatformat:2}}%</td>
                </tr>
                   {% endfor %}
            </table>
        </div>
    </div>
</div>


<div class="container-lg" style="margin-top:100px" id="qaweekly">
    <h4>QA-wise Report</h4><br>
        <div class="row">
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week1</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in qa_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week1' %}

                    <tr>
                        <td>{{f.added_by}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week2</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in qa_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week2' %}

                    <tr>
                        <td>{{f.added_by}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week3</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in qa_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week3' %}

                    <tr>
                        <td>{{f.added_by}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week4</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in qa_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week4' %}

                    <tr>
                        <td>{{f.added_by}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week5</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in qa_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week5' %}

                    <tr>
                        <td>{{f.added_by}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
        </div>
</div>

<div class="container-lg" style="margin-top:100px" id="qaweekly">
    <h4>AM-wise Report</h4><br>
        <div class="row">
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week1</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>AM</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in am_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week1' %}

                    <tr>
                        <td>{{f.am}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week2</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>AM</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in am_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week2' %}

                    <tr>
                        <td>{{f.am}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week3</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>AM</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in am_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week3' %}

                    <tr>
                        <td>{{f.am}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week4</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>AM</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in am_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week4' %}

                    <tr>
                        <td>{{f.am}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week5</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>AM</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in am_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week5' %}

                    <tr>
                        <td>{{f.am}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
        </div>
</div>

<div class="container-lg" style="margin-top:100px" id="qaweekly">
    <h4>TL-wise Report</h4><br>
        <div class="row">
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week1</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in tl_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week1' %}

                    <tr>
                        <td>{{f.team_lead}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week2</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in tl_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week2' %}

                    <tr>
                        <td>{{f.team_lead}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week3</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in tl_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week3' %}

                    <tr>
                        <td>{{f.team_lead}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week4</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in tl_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week4' %}

                    <tr>
                        <td>{{f.team_lead}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
            <div class="col-md-6">
                <div class="weeks">
                    <h6>Week5</h6>
                    <table class="table table-hover">
                        <tr>
                            <td>QA</td>
                            <td>Audits</td>
                            <td>Score</td>
                        </tr>
                    {% for i in tl_wise_avg %}
                    {% for f in i %}
                    {% if f.week == 'week5' %}

                    <tr>
                        <td>{{f.team_lead}}</td>
                        <td>{{f.dcount}}</td>
                        <td>{{f.davg|floatformat:2}}%</td>
                    </tr>

                {% endif %}
                {% endfor %}
                {% endfor %}
                    </table>
                </div>
            </div>
        </div>
</div>

<div class="container" style="margin-top:100px">
    <h1 class="text-center">Associate-wise</h1>
    <br>
    <div class="row">
        <div class="col-md-6">
            <div class="campwisedetailtables">
                <h4>Total Audits</h4>
                <br>
                <table class="table">
                    <tr>
                        <th>Name</th>
                        <th>Audit Count</th>
                        <th>Score</th>
                    </tr>
                    {% for e in emp_wise %}
                    <tr>
                        <td>{{e.associate_name}}</td>
                        <td>{{e.dcount}}</td>
                        <td>{{e.davg|floatformat:2}}%</td>
                    </tr>
                    {% endfor %}
                </table>

            </div>
        </div>
        <div class="col-md-4">
            <div class="campwisedetailtables">
                <h4>Fatal Errors</h4>
                <br>
                <table class="table">
                    <tr>
                        <th>Name</th>
                        <th>Fatal Errors</th>
                    </tr>
                    {% for e in emp_wise_fatal %}
                    <tr>
                        <td>{{e.associate_name}}</td>
                        <td>{{e.dcount}}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>


    </div>

</div>

<div class="container-lg" style="margin-top:100px">

    
    <div class="row">
        <div class="col-md-6">
            <div class="campwisedetailtables">
            <h4>Week-wise Fatal</h4><br>
            <table class="table">
                <tr>
                    <th>Associate Name</th>
                    <th>Week1</th>
                    <th>Week2</th>
                    <th>Week3</th>
                    <th>Week4</th>
                    <th>Week5</th>
                </tr>

            {% for p in pivot_test %}
            <tr>
                <td>{{p.associate_name}}</td>
                <td>{{p.week1}}</td>
                <td>{{p.week2}}</td>
                <td>{{p.week3}}</td>
                <td>{{p.week4}}</td>
                <td>{{p.week5}}</td>
            </tr>

            {% endfor %}
        </table>

            </div>
        </div>
    </div>

</div>



<div class="container-lg" style="margin-top:100px">
    <div class="row">
        <div class="col-md-4">

        <div class="col-md-2">

        </div>
        <div class="col-md-6">
            <h4>Weekly Fatal/Non-Fatal Error %</h4>
                <br>

                <table class="table table-hover" style="background: aliceblue;">
                    <tr>
                        <th>Week</th>
                        <th>Total Audits</th>
                        <th>Fatal Errors</th>
                        <th>Fatal %</th>
                        <th>Non Fatal Errors</th>
                        <th>Non Fatal %</th>
                    </tr>
                    {% for w in week_wise_report %}
                    <tr>
                        <td>{{w.week}}</td>
                        <td>{{w.total_audits}}</td>
                        <td>{{w.fatal_count}}</td>
                        <td>{{w.fatal_avg}}</td>
                        <td>{{w.non_fatal_count}}</td>
                        <td>{{w.non_fatal_avg}}</td>

                    </tr>
                    {% endfor %}
                </table>
            </div>

    </div>
</div>



{% endblock %}

